# ะขะตััะธัะพะฒะฐะฝะธะต

[โ ะ README](../../README.ru.md) ยท [ะััะธัะตะบัััะฐ](./architecture.md) ยท [API](./api.md) ยท [ะะพะฝะบััะตะฝัะฝะพััั](./concurrency.md) ยท [ะะตะฟะปะพะน](./deployment.md)

---

## ะะฐะฑะพั ะฝะฐะณััะทะพัะฝัั ัะตััะพะฒ

ะกะธััะตะผะฐ ะฒะบะปััะฐะตั ะบะพะผะฟะปะตะบัะฝัะน ะฝะฐะฑะพั ะฝะฐะณััะทะพัะฝัั ัะตััะพะฒ, ะฟัะพะฒะตััััะธั ะฟะพะฒะตะดะตะฝะธะต ะฟะพะด ัััะตััะพะฒัะผะธ ััะปะพะฒะธัะผะธ.

### ะะฐะฟััะบ ะฝะฐะณััะทะพัะฝัั ัะตััะพะฒ

```bash
cd backend

# ะกัะฐะฝะดะฐััะฝัะน ัะตะถะธะผ
npm run load-test

# ะัััััะน ัะตะถะธะผ (ะฃะปัััะฐ-ะฑัััััะน Redis ะฟััั)
npm run load-test -- --fast

# ะขัะถัะปัะน ัััะตัั-ัะตัั
npm run load-test -- --fast --users 100 --deposit 100000 --stress-duration 10000
```

### ะขะตััะพะฒัะต ััะตะฝะฐัะธะธ

ะะฐะฑะพั ะฒะบะปััะฐะตั 11 ัะตััะพะฒัั ััะตะฝะฐัะธะตะฒ:

#### 1. Concurrent Bid Storm (ะจัะพัะผ ะฟะฐัะฐะปะปะตะปัะฝัั ััะฐะฒะพะบ)
- **ะงัะพ**: 100 ัะฐะทะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะดะตะปะฐัั ััะฐะฒะบะธ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ
- **ะัะพะฒะตััะตั**: ะกะธััะตะผะฐ ะฒัะดะตัะถะธะฒะฐะตั ะฟะฐัะฐะปะปะตะปัะฝัั ะฝะฐะณััะทะบั ะฑะตะท ะฟะพะฒัะตะถะดะตะฝะธั ะดะฐะฝะฝัั
- **ะะถะธะดะฐะตััั**: ะัะต 100 ััะฐะฒะพะบ ััะฟะตัะฝั ั ัะฝะธะบะฐะปัะฝัะผะธ ััะผะผะฐะผะธ

#### 2. Rapid Sequential Bids (ะัััััะต ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝัะต ััะฐะฒะบะธ)
- **ะงัะพ**: ะะดะธะฝ ะฟะพะปัะทะพะฒะฐัะตะปั ะดะตะปะฐะตั 20 ััะฐะฒะพะบ ะฒ ะฑััััะพะน ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััะธ
- **ะัะพะฒะตััะตั**: ะะพะณะธะบะฐ ัะฒะตะปะธัะตะฝะธั ััะฐะฒะพะบ ะธ ะพะฑัะฐะฑะพัะบะฐ ะบัะปะดะฐัะฝะฐ
- **ะะถะธะดะฐะตััั**: ะกัะฐะฒะบะธ ะพะฑัะฐะฑะพัะฐะฝั ะบะพััะตะบัะฝะพ ั ััััะพะผ ะบัะปะดะฐัะฝะฐ

#### 3. Tie-Breaking (Same Amount) (ะะดะธะฝะฐะบะพะฒัะต ััะผะผั)
- **ะงัะพ**: 10 ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะฟััะฐัััั ะฟะพััะฐะฒะธัั ะพะดะธะฝะฐะบะพะฒัั ััะผะผั ะพะดะฝะพะฒัะตะผะตะฝะฝะพ
- **ะัะพะฒะตััะตั**: ะฃะฝะธะบะฐะปัะฝัะน ะธะฝะดะตะบั ะธ first-write-wins
- **ะะถะธะดะฐะตััั**: ะะพะฒะฝะพ 1 ััะฐะฒะบะฐ ััะฟะตัะฝะฐ, 9 ะพัะบะปะพะฝะตะฝั ั 409 Conflict

#### 4. High-Frequency Stress (ะััะพะบะพัะฐััะพัะฝัะน ัััะตัั)
- **ะงัะพ**: ะัะพะดะพะปะถะธัะตะปัะฝัะต ะฒััะพะบะพัะฐััะพัะฝัะต ััะฐะฒะบะธ
- **ะัะพะฒะตััะตั**: ะกัะฐะฑะธะปัะฝะพััั ัะธััะตะผั ะฟะพะด ะฝะตะฟัะตััะฒะฝะพะน ะฝะฐะณััะทะบะพะน
- **ะะถะธะดะฐะตััั**: >200 ััะฐะฒะพะบ ะพะฑัะฐะฑะพัะฐะฝะพ ะฝะฐ >25 req/s

#### 5. Massive Concurrent Stress (ะะฐััะธะฒะฝัะน ะฟะฐัะฐะปะปะตะปัะฝัะน ัััะตัั)
- **ะงัะพ**: 300 ะฟะฐัะฐะปะปะตะปัะฝัั ะทะฐะฟัะพัะพะฒ
- **ะัะพะฒะตััะตั**: ะะพะฒะตะดะตะฝะธะต ัะธััะตะผั ะฟัะธ ัะบัััะตะผะฐะปัะฝะพะน ะบะพะฝะบััะตะฝัะฝะพััะธ
- **ะะถะธะดะฐะตััั**: >200 ััะฟะตัะฝัั ััะฐะฒะพะบ (ะฝะตะบะพัะพััะต ะพัะบะปะพะฝะตะฝั ะธะท-ะทะฐ ะบะพะฝัะตะฝัะธะธ)

**ะะพะฝะธะผะฐะฝะธะต ัะตะทัะปััะฐัะพะฒ** (`226/300 @ 17.2 req/s`):
- **226 ััะฟะตัะฝัั**: ะญัะธ ััะฐะฒะบะธ ะพะฑัะฐะฑะพัะฐะฝั ะธ ัะพััะฐะฝะตะฝั ะบะพััะตะบัะฝะพ
- **74 ะพัะบะปะพะฝะตะฝะพ**: ะัะบะปะพะฝะตะฝั ะฝะฐะผะตัะตะฝะฝัะผะธ ะทะฐัะธัะฐะผะธ (ะฝะต ะพัะธะฑะบะธ)
- **17.2 req/s**: ะัะพะฟััะบะฝะฐั ัะฟะพัะพะฑะฝะพััั ะฟะพะด ัะบัััะตะผะฐะปัะฝะพะน ะฝะฐะณััะทะบะพะน

**ะะพัะตะผั ะฝะต 300/300?** ะกะธััะตะผะฐ ะฝะฐะผะตัะตะฝะฝะพ ะพัะบะปะพะฝัะตั ะฝะตะบะพัะพััะต ะทะฐะฟัะพัั ะดะปั ัะพััะฐะฝะตะฝะธั ัะตะปะพััะฝะพััะธ ะดะฐะฝะฝัั:
- **ะะฐัะฟัะตะดะตะปัะฝะฝะฐั ะฑะปะพะบะธัะพะฒะบะฐ (Redlock)**: ะัะตะดะพัะฒัะฐัะฐะตั race conditions, ะพัะบะปะพะฝัั ะฟะฐัะฐะปะปะตะปัะฝัะต ะทะฐะฟัะพัั ะพะดะฝะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
- **ะัะบะปะพะฝะตะฝะธะต ะดัะฑะปะธััััะธั ััะผะผ**: ะขะพะปัะบะพ ะพะดะฝะฐ ััะฐะฒะบะฐ ะฝะฐ ััะผะผั ัะฐะทัะตัะตะฝะฐ
- **Rate limiting**: ะะฐัะธัะฐ ะพั ัะฟะฐะผะฐ/DoS ะฐัะฐะบ

**ะงัะพ ัะบะฐะทัะฒะฐะตั ะฝะฐ ะฟัะพะฑะปะตะผั:**

| ะะตะทัะปััะฐั | ะะฝะฐัะตะฝะธะต |
|-----------|----------|
| `300/300` ั ะดัะฑะปะธะบะฐัะฐะผะธ ะฒ ะะ | ะะพะฒัะตะถะดะตะฝะธะต ะดะฐะฝะฝัั - ะะะะขะะงะะกะะะ ะะะ |
| ะะฐะดะตะฝะธะต ัะตัะฒะตัะฐ ะธะปะธ ัะฐะนะผะฐัั | ะกะธััะตะผะฐ ะฝะต ัะฟัะฐะฒะปัะตััั - ะฝัะถะฝะฐ ะพะฟัะธะผะธะทะฐัะธั |
| `0/300` | ะกะธััะตะผะฐ ะฟะพะปะฝะพัััั ะฟะตัะตะณััะถะตะฝะฐ - ะฝัะถะฝะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต |
| `<100/300` ั ะพัะธะฑะบะฐะผะธ | ะะฐัะธัะฐ ัะปะธัะบะพะผ ะฐะณัะตััะธะฒะฝะฐั ะธะปะธ ะฑะฐะณะธ |

**ะงัะพ ัะบะฐะทัะฒะฐะตั ะฝะฐ ะทะดะพัะพะฒัั ัะธััะตะผั:**

| ะะตะทัะปััะฐั | ะะฝะฐัะตะฝะธะต |
|-----------|----------|
| `>200/300` | ะฅะพัะพัะฐั ะฟัะพะฟััะบะฝะฐั ัะฟะพัะพะฑะฝะพััั ะฟะพะด ัััะตััะพะผ |
| `>15 req/s` | ะัะธะตะผะปะตะผะฐั ัะบะพัะพััั ะพะฑัะฐะฑะพัะบะธ |
| ะะตั ะดัะฑะปะตะน ััะฐะฒะพะบ | ะฆะตะปะพััะฝะพััั ะดะฐะฝะฝัั ัะพััะฐะฝะตะฝะฐ |
| ะะตั ะฟะฐะดะตะฝะธะน | ะกะธััะตะผะฐ ััะฐะฑะธะปัะฝะฐ ะฟะพะด ะฝะฐะณััะทะบะพะน |

#### 6. Insufficient Funds Rejection (ะัะบะปะพะฝะตะฝะธะต ะฟัะธ ะฝะตะดะพััะฐัะบะต ััะตะดััะฒ)
- **ะงัะพ**: ะะพะปัะทะพะฒะฐัะตะปะธ ะฟััะฐัััั ะฟะพััะฐะฒะธัั ะฑะพะปััะต ัะฒะพะตะณะพ ะฑะฐะปะฐะฝัะฐ
- **ะัะพะฒะตััะตั**: ะัะพะฒะตัะบะฐ ะฑะฐะปะฐะฝัะฐ ะธ ะพัะบะปะพะฝะตะฝะธะต
- **ะะถะธะดะฐะตััั**: ะัะต ััะฐะฒะบะธ ะพัะบะปะพะฝะตะฝั ั 402 Payment Required

#### 7. Invalid Bid Rejection (ะัะบะปะพะฝะตะฝะธะต ะฝะตะฒะฐะปะธะดะฝัั ััะฐะฒะพะบ)
- **ะงัะพ**: ะะฐะทะปะธัะฝัะต ะฝะตะฒะฐะปะธะดะฝัะต ะฟะพะฟััะบะธ (ะพััะธัะฐัะตะปัะฝัะต, ะฝัะปะตะฒัะต, ะฝะธะถะต ะผะธะฝะธะผัะผะฐ)
- **ะัะพะฒะตััะตั**: ะะฐะปะธะดะฐัะธั ะฒัะพะดะฝัั ะดะฐะฝะฝัั
- **ะะถะธะดะฐะตััั**: ะัะต ะพัะบะปะพะฝะตะฝั ั 400 Bad Request

#### 8. Auth Validation (ะะฐะปะธะดะฐัะธั ะฐะฒัะพัะธะทะฐัะธะธ)
- **ะงัะพ**: ะะฐะฟัะพัั ั ะฝะตะฒะฐะปะธะดะฝะพะน/ะพััััััะฒัััะตะน ะฐะฒัะพัะธะทะฐัะธะตะน
- **ะัะพะฒะตััะตั**: Middleware ะฐะฒัะพัะธะทะฐัะธะธ
- **ะะถะธะดะฐะตััั**: ะัะฒะตัั 401 Unauthorized

#### 9. Same-User Race Condition (Race condition ะพะดะฝะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั)
- **ะงัะพ**: ะะดะธะฝ ะฟะพะปัะทะพะฒะฐัะตะปั ะพัะฟัะฐะฒะปัะตั 10 ะฟะฐัะฐะปะปะตะปัะฝัั ะทะฐะฟัะพัะพะฒ ััะฐะฒะพะบ
- **ะัะพะฒะตััะตั**: Redlock ะฟัะตะดะพัะฒัะฐัะฐะตั ะฟะฐัะฐะปะปะตะปัะฝัั ะพะฑัะฐะฑะพัะบั
- **ะะถะธะดะฐะตััั**: ะะฐะบัะธะผัะผ 1 ััะฟะตัะฝะฐ (ะฑะปะฐะณะพะดะฐัั ัะฐัะฟัะตะดะตะปัะฝะฝะพะน ะฑะปะพะบะธัะพะฒะบะต)

#### 10. Bid Ordering Verification (ะัะพะฒะตัะบะฐ ะฟะพััะดะบะฐ ััะฐะฒะพะบ)
- **ะงัะพ**: ะัะพะฒะตัะบะฐ ัะพััะธัะพะฒะบะธ ัะฐะฑะปะธัั ะปะธะดะตัะพะฒ ะฟะพัะปะต ะผะฝะพะถะตััะฒะฐ ััะฐะฒะพะบ
- **ะัะพะฒะตััะตั**: ะะพััะตะบัะฝะฐั ัะพััะธัะพะฒะบะฐ ะฟะพ ััะผะผะต ะธ ะฒัะตะผะตะฝะธ
- **ะะถะธะดะฐะตััั**: ะขะฐะฑะปะธัะฐ ะปะธะดะตัะพะฒ ัะพะพัะฒะตัััะฒัะตั ะพะถะธะดะฐะตะผะพะผั ะฟะพััะดะบั

#### 11. Financial Integrity (ะคะธะฝะฐะฝัะพะฒะฐั ัะตะปะพััะฝะพััั)
- **ะงัะพ**: ะัะพะฒะตัะบะฐ ะพััััััะฒะธั ัะพะทะดะฐะฝะธั ะธะปะธ ะฟะพัะตัะธ ะดะตะฝะตะณ
- **ะัะพะฒะตััะตั**: ะััะณะฐะปัะตััะบะธะต ะธะฝะฒะฐัะธะฐะฝัั
- **ะะถะธะดะฐะตััั**: ะะตะฟะพะทะธัั - ะฒัะฒะพะดั = ะฑะฐะปะฐะฝัั + ะทะฐะผะพัะพะทะบะฐ + ะฟะพััะฐัะตะฝะพ

### ะัะธะผะตั ะฒัะฒะพะดะฐ (ะกัะฐะฝะดะฐััะฝัะน ัะตะถะธะผ)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       AUCTION SYSTEM LOAD TEST SUITE
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ Concurrent Bid Storm: 100/100 succeeded @ 19.9 req/s
โ Rapid Sequential Bids: 20/20 succeeded, avg=15ms
โ Tie-Breaking (Same Amount): 1 winner from 10 identical bids
โ High-Frequency Stress: 219 bids @ 27.4 req/s
โ Massive Concurrent Stress: 226/300 @ 17.2 req/s
โ Insufficient Funds Rejection: 5/5 correctly rejected
โ Invalid Bid Rejection: 4/4 rejected
โ Auth Validation: InvalidToken=401, NoAuth=401
โ Same-User Race Condition: 0/10 succeeded (expected โค5)
โ Bid Ordering Verification: ordering=correct
โ Financial Integrity: VALID (diff=0.00)

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  ALL TESTS PASSED
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะัะธะผะตั ะฒัะฒะพะดะฐ (ะัััััะน ัะตะถะธะผ)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   AUCTION SYSTEM LOAD TEST SUITE v1.0.0
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
Fast Bid:  ENABLED (ะฃะปัััะฐ-ะฑัััััะน Redis ะฟััั)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ Concurrent Bid Storm: 50/50 @ 2,452 req/s, p99=19ms
โ Rapid Sequential Bids: 20/20, avg=2ms
โ High-Frequency Stress: 88 bids @ 17.4 req/s
โ Massive Concurrent Stress: 150/150 @ 438 req/s, p99=12ms
โ Same-User Race Condition: 0/10 succeeded (expected <10)
โ Bid Ordering Verification: ordering=correct
โ Financial Integrity: VALID (diff=0.00)

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  ALL TESTS PASSED
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะกัะฐะฒะฝะตะฝะธะต ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

| ะะตััะธะบะฐ | ะกัะฐะฝะดะฐััะฝะฐั ััะฐะฒะบะฐ | ะฃะปัััะฐ-ะฑััััะฐั | ะฃะปัััะตะฝะธะต |
|---------|-------------------|----------------|-----------|
| **Concurrent Storm (50 ัะทะตัะพะฒ)** | 11.5 req/s, p99=4.3s | 2,452 req/s, p99=19ms | **213x ะฑััััะตะต** |
| **ะะพัะปะตะดะพะฒะฐัะตะปัะฝัะต ััะฐะฒะบะธ** | avg 16ms | avg 2ms | **8x ะฑััััะตะต** |
| **ะะฐััะพะฒะฐั ะบะพะฝะบััะตะฝัะฝะพััั (150)** | 18.5 req/s, p99=2.6s | 438 req/s, p99=12ms | **24x ะฑััััะตะต** |
| **E2E ะบะพะฝะบััะตะฝัะฝะฐั ะฟัะพะฟััะบะฝะฐั ัะฟะพัะพะฑะฝะพััั** | โ | 5,556 ััะฐะฒะพะบ/ัะตะบ | โ |
| **Raw Lua Script ะฟัะพะฟััะบะฝะฐั ัะฟะพัะพะฑะฝะพััั** | โ | 58,824 ops/sec | โ |

---

## Artillery ะฝะฐะณััะทะพัะฝัะต ัะตััั (v2.0.27)

ะัะพะดะฐะบัะตะฝ-grade ะฝะฐะณััะทะพัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ั Artillery ะดะปั ัะตะฐะปะธััะธัะฝะพะน ัะธะผัะปััะธะธ ััะฐัะธะบะฐ.

### ะัััััะน ััะฐัั

```bash
cd backend

# HTTP ัะตััั
pnpm run load-test:smoke     # ะััััะฐั 10ั ะฟัะพะฒะตัะบะฐ
pnpm run load-test           # ะกัะฐะฝะดะฐััะฝัะน ะฝะฐะณััะทะพัะฝัะน ัะตัั (197 req/s)
pnpm run load-test:stress    # HTTP ัััะตัั-ัะตัั (~1K req/s)
pnpm run load-test:edge      # ะัะพะฒะตัะบะฐ ะบัะฐะตะฒัั ัะปััะฐะตะฒ

# HTTP ะะฐะบัะธะผะฐะปัะฝะฐั ะฟัะพะฟััะบะฝะฐั ัะฟะพัะพะฑะฝะพััั (3.3K-13.8K req/s)
npx artillery run test/artillery/http-max-throughput.yml

# WebSocket ัะตััั
pnpm run load-test:ws        # ะกัะฐะฝะดะฐััะฝัะน WS (100% success)
npx artillery run test/artillery/websocket-max-throughput.yml  # 200K emit/s ะฟะธะบ
```

### ะะตะทัะปััะฐัั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

#### ะะดะธะฝ ะฟัะพัะตัั (1 ะฒะพัะบะตั)

| ะัะพัะพะบะพะป | ะะธะบ | ะฃััะพะนัะธะฒะฐั | ะะฐัะตะฝัะฝะพััั | ะัะตะฝะบะฐ |
|----------|-----|------------|-------------|--------|
| **WebSocket** | **200,018 emit/s** | 175,970/s | 0ะผั | **A+** |
| **HTTP** | **3,362 req/s** | 3,100/s | 1.5ะผั mean, 5ะผั p99 | **A+** |

#### ะะปะฐััะตัะฝัะน ัะตะถะธะผ (12 ัะดะตั)

| ะัะพัะพะบะพะป | ะะธะบ | ะฃะปัััะตะฝะธะต |
|----------|-----|-----------|
| **HTTP** | **13,812 req/s** | ~4.1x |
| **WebSocket** | ~2.4M emit/s | ัะตะพัะตัะธัะตัะบะธ |

ะะบะปััะธัั ะบะปะฐััะตั: `CLUSTER_WORKERS=auto` ะฒ `.env`

### ะะตะทัะปััะฐัั ะผะฐะบัะธะผะฐะปัะฝะพะน ะฟัะพะฟััะบะฝะพะน ัะฟะพัะพะฑะฝะพััะธ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  WEBSOCKET (ะพะดะธะฝ ะฟัะพัะตัั)                                    โ
โ    ๐ ะะะ:        200,018 emit/sec                          โ
โ    โก ะฃะกะขะะะงะะะะฏ: 175,970 emit/sec                           โ
โ    ๐ ะะกะะะ:      11,305,542 emits ะทะฐ 67 ัะตะบัะฝะด             โ
โ    โฑ๏ธ  ะะะขะะะขะะะกะขะฌ: 0ะผั (ััะฑ-ะผะธะปะปะธัะตะบัะฝะดะฝะฐั)                 โ
โ                                                              โ
โ  HTTP (12-ัะดะตัะฝัะน ะบะปะฐััะตั)                                   โ
โ    ๐ ะะะ:        13,812 req/sec                            โ
โ    โก ะฃะกะขะะะงะะะะฏ: 12,000-13,000 req/sec                      โ
โ    ๐ ะฃะะฃะงะจะะะะ:  ~4.1x ะฟะพ ััะฐะฒะฝะตะฝะธั ั ะพะดะฝะธะผ ะฟัะพัะตััะพะผ       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะคะฐะนะปั ัะตััะพะฒ (6 ัะตััะพะฒ)

```
test/artillery/
โโโ load-test.yml                # HTTP ััะฐะฝะดะฐััะฝัะน (197 req/s)
โโโ stress-test.yml              # HTTP ัะฑะฐะปะฐะฝัะธัะพะฒะฐะฝะฝัะน ัััะตัั (~1K req/s)
โโโ http-max-throughput.yml      # HTTP ะผะฐะบัะธะผัะผ (3.3K-13.8K req/s)
โโโ edge-cases.yml               # ะขะตััั ะฒะฐะปะธะดะฐัะธะธ
โโโ websocket-test.yml           # WebSocket ััะฐะฝะดะฐััะฝัะน (100% success)
โโโ websocket-max-throughput.yml # WebSocket ะผะฐะบัะธะผัะผ (200K emit/s)
โโโ functions.js                 # HTTP ัะตะปะฟะตัั
โโโ edge-case-functions.js       # Edge case ัะตะปะฟะตัั
โโโ websocket-functions.js       # WS ัะตะปะฟะตัั
โโโ reports/                     # JSON + HTML ะพััััั
โโโ BENCHMARK_REPORT.md          # ะะพะปะฝัะน ะพัััั
```

ะะพะปะฝัะต ะดะตัะฐะปะธ ะฑะตะฝัะผะฐัะบะพะฒ: [`backend/test/artillery/BENCHMARK_REPORT.md`](../../backend/test/artillery/BENCHMARK_REPORT.md)

---

## ะฎะฝะธั ะธ ะธะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั (Vitest)

Backend ะธัะฟะพะปัะทัะตั **Vitest** ะบะฐะบ ัะตัั-ััะตะนะผะฒะพัะบ ัะพ ัะปะตะดัััะตะน ััััะบัััะพะน:

```
backend/src/
โโโ modules/
โ   โโโ **/*.spec.ts          # ะฎะฝะธั-ัะตััั (ััะดะพะผ ั ะธััะพะดะฝะธะบะฐะผะธ)
โโโ tests/
    โโโ unit/                  # ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะฝะธั-ัะตััั
    โ   โโโ *.spec.ts
    โโโ integration/           # ะะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั (MongoDB Memory Server)
        โโโ *.spec.ts
```

### ะะฐะฟััะบ ัะตััะพะฒ

```bash
cd backend

# ะะฐะฟัััะธัั ะฒัะต ัะตััั (857 ัะตััะพะฒ)
pnpm test

# ะขะพะปัะบะพ ัะฝะธั-ัะตััั (680 ัะตััะพะฒ, ะฑััััะตะต)
pnpm test:unit

# ะขะพะปัะบะพ ะธะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั (177 ัะตััะพะฒ)
pnpm test:integration

# ะก ะฟะพะบัััะธะตะผ
pnpm test:cov

# ะฎะฝะธั-ัะตััั ั ะฟะพะบัััะธะตะผ
pnpm test:cov:unit

# ะะพะฝะบัะตัะฝัะน ัะฐะนะป
pnpm test -- auctions.service.spec.ts

# ะะตะถะธะผ watch (ะฟะตัะตะทะฐะฟััะบ ะฟัะธ ะธะทะผะตะฝะตะฝะธัั)
pnpm test:watch

# ะะธะทัะฐะปัะฝัะน UI ัะตะถะธะผ
pnpm test:ui

# ะัะปะฐะดะบะฐ ัะตััะพะฒ (ั ะธะฝัะฟะตะบัะพัะพะผ)
pnpm test:debug
```

### ะะพะฝัะธะณััะฐัะธั ัะตััะพะฒ

| ะคะฐะนะป ะบะพะฝัะธะณััะฐัะธะธ | ะะฐะทะฝะฐัะตะฝะธะต |
|-------------------|------------|
| `vitest.config.ts` | ะะฐะทะพะฒะฐั ะบะพะฝัะธะณััะฐัะธั (ะฒัะต ัะตััั) |
| `vitest.config.unit.ts` | ะขะพะปัะบะพ ัะฝะธั-ัะตััั (ะธัะบะปััะฐะตั integration/) |
| `vitest.config.integration.ts` | ะขะพะปัะบะพ ะธะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั |

### ะกัะฐัะธััะธะบะฐ ัะตััะพะฒ

| ะะฐัะตะณะพัะธั | ะคะฐะนะปะพะฒ | ะขะตััะพะฒ | ะัะตะผั |
|-----------|--------|--------|-------|
| **ะฎะฝะธั** | 15 | 680 | ~3ั |
| **ะะฝัะตะณัะฐัะธะพะฝะฝัะต** | 5 | 177 | ~50ั |
| **ะัะตะณะพ** | 20 | 857 | ~12ั (ะฟะฐัะฐะปะปะตะปัะฝะพ) |

### ะะปััะตะฒัะต ะพัะพะฑะตะฝะฝะพััะธ ัะตััะธัะพะฒะฐะฝะธั

- **ะะฐัะฐะปะปะตะปัะฝะพะต ะฒัะฟะพะปะฝะตะฝะธะต**: ะขะตััั ะทะฐะฟััะบะฐัััั ะฟะฐัะฐะปะปะตะปัะฝะพ ะฟะพ ัะผะพะปัะฐะฝะธั
- **MongoDB Memory Server**: ะะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั ะธัะฟะพะปัะทััั in-memory MongoDB ั replica set
- **Redis Mock**: `ioredis-mock` ะดะปั Redis ะพะฟะตัะฐัะธะน
- **SWC Transform**: ะััััะฐั ะบะพะผะฟะธะปััะธั TypeScript
- **Typia Integration**: Runtime ะฒะฐะปะธะดะฐัะธั ัะตัะตะท `@ryoppippi/unplugin-typia`

---

## Nestia E2E-ัะตััั

ะกะธััะตะผะฐ ะฒะบะปััะฐะตั ะบะพะผะฟะปะตะบัะฝัะต E2E-ัะตััั, ะฟะพะบััะฒะฐััะธะต ะฒัั ะบัะธัะธัะตัะบัั ััะฝะบัะธะพะฝะฐะปัะฝะพััั.

### ะะฐะฟััะบ E2E-ัะตััะพะฒ

```bash
cd backend

# ะะฐะฟัััะธัั ะฒัะต E2E-ัะตััั
for test in test/*.e2e.ts; do npx ts-node "$test"; done

# ะะฐะฟัััะธัั ะบะพะฝะบัะตัะฝัะน ะฝะฐะฑะพั ัะตััะพะฒ
npx ts-node test/concurrency.e2e.ts
npx ts-node test/financial-integrity.e2e.ts
npx ts-node test/websocket-events.e2e.ts
```

### ะะฐะฑะพัั ัะตััะพะฒ

#### 1. ะขะตััั ะฟะฐัะฐะปะปะตะปัะฝะพััะธ (`concurrency.e2e.ts`)

| ะขะตัั | ะะฟะธัะฐะฝะธะต |
|------|----------|
| Concurrent Bids Different Users | 10 ะฟะพะปัะทะพะฒะฐัะตะปะตะน ััะฐะฒัั ะพะดะฝะพะฒัะตะผะตะฝะฝะพ ั ัะฐะทะฝัะผะธ ััะผะผะฐะผะธ |
| Duplicate Bid Amount Rejection | ะัะพัะพะน ะฟะพะปัะทะพะฒะฐัะตะปั ะพัะบะปะพะฝัะฝ ะฟัะธ ััะฐะฒะบะต ัะฐะบะพะน ะถะต ััะผะผั |
| Rapid Bid Increases | ะะดะธะฝ ะฟะพะปัะทะพะฒะฐัะตะปั ัะฒะตะปะธัะธะฒะฐะตั ััะฐะฒะบั 10 ัะฐะท ะฑััััะพ |
| Concurrent Same-Amount Race | 5 ะฟะพะปัะทะพะฒะฐัะตะปะตะน ััะฐะฒัั ะพะดะฝั ััะผะผั - ัะพะฒะฝะพ 1 ะฒัะธะณััะฒะฐะตั |
| Bidding on Inactive Auction | ะกัะฐะฒะบะธ ะพัะบะปะพะฝะตะฝั ะฝะฐ ะฝะตะฐะบัะธะฒะฝะพะผ ะฐัะบัะธะพะฝะต |
| Leaderboard Consistency | ะัะพะฒะตัะบะฐ ะฟะพััะดะบะฐ ะฟัะธ 20 ะฟะฐัะฐะปะปะตะปัะฝัั ััะฐะฒะบะฐั |

#### 2. ะขะตััั ัะธะฝะฐะฝัะพะฒะพะน ัะตะปะพััะฝะพััะธ (`financial-integrity.e2e.ts`)

| ะขะตัั | ะะฟะธัะฐะฝะธะต |
|------|----------|
| Balance Freezing | ะกัะฐะฒะบะฐ 300 ะทะฐะผะพัะฐะถะธะฒะฐะตั 300, ะดะพัััะฟะฝัะน ะฑะฐะปะฐะฝั ัะผะตะฝััะฐะตััั |
| Incremental Freeze | ะฃะฒะตะปะธัะตะฝะธะต ััะฐะฒะบะธ ะทะฐะผะพัะฐะถะธะฒะฐะตั ัะพะปัะบะพ ัะฐะทะฝะธัั |
| Outbid Refund | ะัะพะฒะตัะบะฐ ัะพััะฐะฝะตะฝะธั ััะผะผ ะฟัะธ ะฟะตัะตะฑะธัะธะธ |
| Insufficient Funds Rejection | ะะตะปัะทั ััะฐะฒะธัั ะฑะพะปััะต ะดะพัััะฟะฝะพะณะพ ะฑะฐะปะฐะฝัะฐ |
| Multi-User Financial Integrity | ะกัะผะผะฐ ะดะตะฝะตะณ ะฒ ัะธััะตะผะต = ััะผะผะต ะดะตะฟะพะทะธัะพะฒ |
| Bid Amount Validation | ะัะบะปะพะฝะตะฝะธะต ััะฐะฒะพะบ ะฝะธะถะต ะผะธะฝะธะผัะผะฐ ะธ ั ะฝะตะดะพััะฐัะพัะฝัะผ ัะฐะณะพะผ |

#### 3. ะขะตััั WebSocket ัะพะฑััะธะน (`websocket-events.e2e.ts`)

| ะขะตัั | ะะฟะธัะฐะฝะธะต |
|------|----------|
| New Bid Event | ะะปะธะตะฝัั ะฟะพะปััะฐัั `new-bid` ะฟัะธ ัะฐะทะผะตัะตะฝะธะธ ััะฐะฒะบะธ |
| Auction Update Event | ะะปะธะตะฝัั ะฟะพะปััะฐัั `auction-update` ะฟัะธ ัะผะตะฝะต ัะพััะพัะฝะธั |
| Room Isolation | ะะปะธะตะฝัั ะฟะพะปััะฐัั ัะพะฑััะธั ัะพะปัะบะพ ะพั ัะฒะพะตะณะพ ะฐัะบัะธะพะฝะฐ |
| Multiple Connections Same User | ะัะต ัะพะตะดะธะฝะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปั ะฟะพะปััะฐัั ัะพะฑััะธั |
| Leave Auction Room | ะะตั ัะพะฑััะธะน ะฟะพัะปะต ะฒััะพะดะฐ ะธะท ะบะพะผะฝะฐัั |

#### 4. ะขะตััั ัะตัะฒะตัะฝะพะณะพ ัะฐะนะผะตัะฐ (`server-timer.e2e.ts`)

| ะขะตัั | ะะฟะธัะฐะฝะธะต |
|------|----------|
| Countdown Broadcast | ะกะตัะฒะตั ัะฐัััะปะฐะตั ะพะฑัะฐัะฝัะน ะพััััั ะบะฐะถะดัั ัะตะบัะฝะดั |
| Anti-Sniping Extension | ะขะฐะนะผะตั ะฟัะพะดะปะตะฒะฐะตััั ะฟัะธ ะฟะพะทะดะฝะธั ััะฐะฒะบะฐั |
| Multiple Clients Sync | ะัะต ะบะปะธะตะฝัั ะฟะพะปััะฐัั ัะธะฝััะพะฝะธะทะธัะพะฒะฐะฝะฝัะน ะพััััั |

#### 5. ะขะตััั Redis-ะปะธะดะตัะฑะพัะดะฐ (`redis-leaderboard.e2e.ts`)

| ะขะตัั | ะะฟะธัะฐะฝะธะต |
|------|----------|
| Leaderboard Ordering | ะกัะฐะฒะบะธ ะพััะพััะธัะพะฒะฐะฝั ะฟะพ ััะผะผะต ะฟะพ ัะฑัะฒะฐะฝะธั |
| Leaderboard Pagination | Offset/limit ัะฐะฑะพัะฐัั ะบะพััะตะบัะฝะพ |
| Bid Update | ะะฑะฝะพะฒะปะตะฝะธะต ััะฐะฒะบะธ ะพะฑะฝะพะฒะปัะตั ะปะธะดะตัะฑะพัะด (ะฑะตะท ะดัะฑะปะตะน) |
| Tie Breaking | ะะพะปะตะต ัะฐะฝะฝัั ััะฐะฒะบะฐ ะฒัะธะณััะฒะฐะตั ะฟัะธ ะพะดะธะฝะฐะบะพะฒะพะน ััะผะผะต |

#### 6. ะขะตััั ะฟะตัะตะฝะพัะฐ ััะฐะฒะพะบ (`bid-carryover.e2e.ts`)

| ะขะตัั | ะะฟะธัะฐะฝะธะต |
|------|----------|
| Multi-Round Auction Setup | 3-ัะฐัะฝะดะพะฒัะน ะฐัะบัะธะพะฝ ัะพะทะดะฐัััั ะบะพััะตะบัะฝะพ |
| Bids in Multi-Round | ะขะพะฟ-N ััะฐะฒะพะบ ะฟะพะผะตัะตะฝั ะบะฐะบ ะฒัะธะณัััะฝัะต |
| Min Winning Bid Calculation | ะะพะทะฒัะฐัะฐะตั ะฟัะฐะฒะธะปัะฝัั ััะผะผั ะดะปั ะฒัะพะดะฐ ะฒ ะฒัะธะณัััะฝัะต |
| Carryover Schema | ะกัะตะผะฐ ััะฐะฒะบะธ ะฟะพะดะดะตัะถะธะฒะฐะตั ะฟะพะปั ะฟะตัะตะฝะพัะฐ |

#### 7. ะขะตััั ะฟะพัะพะบะฐ ะฐัะบัะธะพะฝะฐ (`auction-flow.e2e.ts`)

| ะขะตัั | ะะฟะธัะฐะฝะธะต |
|------|----------|
| Full Auction Flow | ะฆะธะบะป: ะกะพะทะดะฐะฝะธะต โ ะกัะฐัั โ ะกัะฐะฒะบะฐ โ ะะธะดะตัะฑะพัะด |

### ะขะตััะพะฒัะต ััะธะปะธัั

ะัะต ัะตััั ะธัะฟะพะปัะทััั ะพะฑัะธะต ัะตะปะฟะตัั ะธะท `test/utils/test-helpers.ts`:

```typescript
// ะะถะธะดะฐะฝะธะต ะฝะฐ ะพัะฝะพะฒะต ัะพะฑััะธะน (ะฑะตะท ะฟัะพะธะทะฒะพะปัะฝัั sleep)
await waitFor(() => bids.length === 5, { timeout: 5000 });

// ะะถะธะดะฐะฝะธะต WebSocket ัะพะฑััะธะน
const events = await collectEvents(socket, 'new-bid', 3);

// ะะธะฝะธะผะฐะปัะฝะฐั ะทะฐะดะตัะถะบะฐ ะดะปั ะพัะธััะบะธ Redlock
await waitForLockRelease(); // 100ms

// ะะพะดะบะปััะตะฝะธะต ะธ ะฒัะพะด ะฒ ะบะพะผะฝะฐัั ะฐัะบัะธะพะฝะฐ
const socket = await connectAndJoin(WS_URL, token, auctionId);
```

### ะัะธะผะตั ะฒัะฒะพะดะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   CONCURRENCY E2E TESTS                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

--- Test: Concurrent Bids from Different Users ---

โ Created 10 users
โ Created auction: 696ca0f8dbc93b6282beb123
โ 10 bids succeeded
  0 bids failed (expected due to rate limiting)
โ Leaderboard has 10 entries
โ All bid amounts are unique (no duplicates)

โ Concurrent Bids Different Users test PASSED

...

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   ALL CONCURRENCY TESTS PASSED!        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ะะพะบัััะธะต ัะตััะฐะผะธ

### ะขะตะบััะฐั ัะฒะพะดะบะฐ ะฟะพ ัะตััะฐะผ

| ะขะธะฟ ัะตััะพะฒ | ะคัะตะนะผะฒะพัะบ | ะะพะปะธัะตััะฒะพ | ะกัะฐััั |
|------------|-----------|------------|--------|
| ะฎะฝะธั-ัะตััั | Vitest | 680 | โ |
| ะะฝัะตะณัะฐัะธะพะฝะฝัะต | Vitest + MongoDB Memory Server | 177 | โ |
| E2E-ัะตััั | Nestia | 7 ะฝะฐะฑะพัะพะฒ | โ |
| ะะฐะณััะทะพัะฝัะต | Artillery | 6 ะบะพะฝัะธะณะพะฒ | โ |

### ะฆะตะปะธ ะฟะพะบัััะธั

| ะะฑะปะฐััั | ะฆะตะปั |
|---------|------|
| ะกะตัะฒะธัะฝัะน ัะปะพะน | >80% |
| ะะพะฝััะพะปะปะตัั | >70% |
| Guards/Middleware | >90% |
| ะัะธัะธัะตัะบะธะต ะฟััะธ (ััะฐะฒะบะธ) | >95% |

### ะะตะฝะตัะฐัะธั ะพััััะฐ ะพ ะฟะพะบัััะธะธ

```bash
cd backend

# ะะพะปะฝัะน ะพัััั ะฟะพะบัััะธั
pnpm test:cov

# ะขะพะปัะบะพ ัะฝะธั-ัะตััั (ะฑััััะตะต)
pnpm test:cov:unit

# ะัะบัััั HTML ะพัััั
open coverage/index.html
```

---

## ะััะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต

### ะขะตััะธัะพะฒะฐะฝะธะต ะฟะพัะพะบะฐ ััะฐะฒะพะบ

1. ะกะพะทะดะฐัั ัะตััะพะฒะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั ั ะฑะฐะปะฐะฝัะพะผ:
```bash
curl -X POST http://localhost:4000/api/users/deposit \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"amount": 1000}'
```

2. ะกะดะตะปะฐัั ััะฐะฒะบั:
```bash
curl -X POST http://localhost:4000/api/auctions/$AUCTION_ID/bid \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"amount": 100}'
```

3. ะัะพะฒะตัะธัั ัะฐะฑะปะธัั ะปะธะดะตัะพะฒ:
```bash
curl http://localhost:4000/api/auctions/$AUCTION_ID/leaderboard \
  -H "Authorization: Bearer $TOKEN"
```

### ะขะตััะธัะพะฒะฐะฝะธะต WebSocket

```javascript
// ะะพะฝัะพะปั ะฑัะฐัะทะตัะฐ ะธะปะธ Node.js
const io = require('socket.io-client');

const socket = io('http://localhost:4000', {
  auth: { token: 'your-jwt-token' }
});

socket.on('connect', () => {
  console.log('ะะพะดะบะปััะตะฝะพ');
  socket.emit('join-auction', { auctionId: '...' });
});

socket.on('new-bid', (data) => {
  console.log('ะะพะฒะฐั ััะฐะฒะบะฐ:', data);
});

socket.on('anti-sniping', (data) => {
  console.log('ะะฐัะฝะด ะฟัะพะดะปัะฝ:', data);
});
```

### ะขะตััะธัะพะฒะฐะฝะธะต ะฐะฝัะธ-ัะฝะฐะนะฟะธะฝะณะฐ

1. ะกะพะทะดะฐัั ะฐัะบัะธะพะฝ ั ะบะพัะพัะบะธะผ ัะฐัะฝะดะพะผ (5 ะผะธะฝัั)
2. ะะพะถะดะฐัััั ะพะบะฝะฐ ะฐะฝัะธ-ัะฝะฐะนะฟะธะฝะณะฐ (ะฟะพัะปะตะดะฝะธะต 5 ะผะธะฝัั)
3. ะกะดะตะปะฐัั ััะฐะฒะบั
4. ะัะพะฒะตัะธัั, ััะพ ะฒัะตะผั ะบะพะฝัะฐ ัะฐัะฝะดะฐ ะฟัะพะดะปะตะฝะพ
5. ะัะพะฒะตัะธัั ะฟะพะปััะตะฝะธะต WebSocket ัะพะฑััะธั `anti-sniping`

### ะขะตััะธัะพะฒะฐะฝะธะต ะฟะฐัะฐะปะปะตะปัะฝัั ััะฐะฒะพะบ

```bash
# ะัะฟะพะปัะทัั GNU parallel
seq 1 100 | parallel -j100 'curl -s -X POST \
  http://localhost:4000/api/auctions/$AUCTION_ID/bid \
  -H "Authorization: Bearer $TOKEN_{}" \
  -H "Content-Type: application/json" \
  -d "{\"amount\": {}00}"'
```

---

## ะัะพะฒะตัะบะฐ ัะธะฝะฐะฝัะพะฒะพะน ัะตะปะพััะฝะพััะธ

ะะฐะฟัััะธัั ะฟัะพะฒะตัะบั ัะตะปะพััะฝะพััะธ, ััะพะฑั ัะฑะตะดะธัััั ะฒ ะพััััััะฒะธะธ ััะตัะบะธ ะดะตะฝะตะณ:

```bash
curl http://localhost:4000/api/transactions/verify-integrity \
  -H "Authorization: Bearer $ADMIN_TOKEN"
```

ะะถะธะดะฐะตะผัะน ะพัะฒะตั:
```json
{
  "valid": true,
  "totalDeposits": 50000,
  "totalWithdrawals": 10000,
  "totalUserBalances": 35000,
  "totalFrozenBalances": 5000,
  "totalSpentOnWins": 0,
  "difference": 0
}
```

ะัะปะธ `difference` ะฝะต ัะฐะฒะตะฝ 0, ะธััะปะตะดัะนัะต:
1. ะัะพะฒะตัััะต ะปะพะณะธ ััะฐะฝะทะฐะบัะธะน
2. ะฃะฑะตะดะธัะตัั, ััะพ ะฒัะต ะฟะตัะตัะพะดั ัะพััะพัะฝะธะน ััะฐะฒะพะบ ะทะฐะฟะธัะฐะฝั
3. ะะพะธัะธัะต ะฟัะตัะฒะฐะฝะฝัะต ััะฐะฝะทะฐะบัะธะธ ะฒ oplog MongoDB

---

## ะะฝัะตะณัะฐัะธั CI/CD

### ะะพะฝัะธะณััะฐัะธั GitHub Actions

ะัะพะตะบั ะธัะฟะพะปัะทัะตั ะบะพะผะฟะปะตะบัะฝัะน CI workflow (`.github/workflows/ci.yml`):

```yaml
name: CI

on:
  push:
    branches: [master]
  pull_request:
    branches: [master]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup pnpm
        uses: pnpm/action-setup@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 22
          cache: pnpm

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      # ะฎะฝะธั-ัะตััั (ะฑัััััะต, ะฑะตะท ะฒะฝะตัะฝะธั ะทะฐะฒะธัะธะผะพััะตะน)
      - name: Run unit tests
        run: pnpm --filter backend test:unit
        env:
          CI: true
          NODE_OPTIONS: --max-old-space-size=4096

      # ะะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั (MongoDB Memory Server)
      - name: Run integration tests
        run: pnpm --filter backend test:integration
        env:
          CI: true
          NODE_OPTIONS: --max-old-space-size=4096
          MONGOMS_REPLSET: rs0

      # ะัััั ะพ ะฟะพะบัััะธะธ
      - name: Generate coverage report
        run: pnpm --filter backend test:cov
        env:
          CI: true
```

### ะะฑะทะพั CI ะฟะฐะนะฟะปะฐะนะฝะฐ

| Job | ะะฟะธัะฐะฝะธะต | ะัะตะผั |
|-----|----------|-------|
| **CodeQL** | ะกะบะฐะฝะธัะพะฒะฐะฝะธะต ััะทะฒะธะผะพััะตะน ะฑะตะทะพะฟะฐัะฝะพััะธ | ~3ะผะธะฝ |
| **Trivy** | ะกะบะฐะฝะธัะพะฒะฐะฝะธะต ััะทะฒะธะผะพััะตะน ะทะฐะฒะธัะธะผะพััะตะน | ~1ะผะธะฝ |
| **Lint** | ESLint ะฟัะพะฒะตัะบะฐ ะบะฐัะตััะฒะฐ ะบะพะดะฐ | ~30ั |
| **Test (Unit)** | Vitest ัะฝะธั-ัะตััั (680 ัะตััะพะฒ) | ~1ะผะธะฝ |
| **Test (Integration)** | Vitest ะธะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั (177 ัะตััะพะฒ) | ~2ะผะธะฝ |
| **Build** | NestJS ะฟัะพะดะฐะบัะตะฝ ัะฑะพัะบะฐ | ~1ะผะธะฝ |

### ะะพะบะฐะปัะฝัะน ะทะฐะฟััะบ ัะตััะพะฒ (ะบะฐะบ ะฒ CI)

```bash
cd backend

# ะะฐะฟัััะธัั ะบะฐะบ ะฒ CI
pnpm test:unit && pnpm test:integration

# ะก ะฟะพะบัััะธะตะผ (ะบะฐะบ ะฒ CI)
CI=true pnpm test:cov
```
