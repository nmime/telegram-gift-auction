# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

[‚Üê –ö README](../../README.ru.md) ¬∑ [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](./architecture.md) ¬∑ [API](./api.md) ¬∑ [–ú–µ—Ö–∞–Ω–∏–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–æ–≤](./auction-mechanics.md) ¬∑ [–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å](./concurrency.md) ¬∑ [–î–µ–ø–ª–æ–π](./deployment.md)

---

## –ù–∞–±–æ—Ä –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –Ω–∞–±–æ—Ä –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–¥ —Å—Ç—Ä–µ—Å—Å–æ–≤—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏.

### –ó–∞–ø—É—Å–∫ –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

```bash
cd backend

# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Ç–µ—Å—Ç
npm run load-test

# –¢—è–∂—ë–ª—ã–π —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç
npm run load-test -- --users 100 --deposit 100000 --stress-duration 10000
```

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

–ù–∞–±–æ—Ä –≤–∫–ª—é—á–∞–µ—Ç 11 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:

#### 1. Concurrent Bid Storm (–®—Ç–æ—Ä–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫)
- **–ß—Ç–æ**: 100 —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–µ–ª–∞—é—Ç —Å—Ç–∞–≤–∫–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**: –°–∏—Å—Ç–µ–º–∞ –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –±–µ–∑ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: –í—Å–µ 100 —Å—Ç–∞–≤–æ–∫ —É—Å–ø–µ—à–Ω—ã —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏

#### 2. Rapid Sequential Bids (–ë—ã—Å—Ç—Ä—ã–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∞–≤–∫–∏)
- **–ß—Ç–æ**: –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç 20 —Å—Ç–∞–≤–æ–∫ –≤ –±—ã—Å—Ç—Ä–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**: –õ–æ–≥–∏–∫–∞ —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å—Ç–∞–≤–æ–∫ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫—É–ª–¥–∞—É–Ω–∞
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: –°—Ç–∞–≤–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å —É—á—ë—Ç–æ–º –∫—É–ª–¥–∞—É–Ω–∞

#### 3. Tie-Breaking (Same Amount) (–û–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å—É–º–º—ã)
- **–ß—Ç–æ**: 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—ã—Ç–∞—é—Ç—Å—è –ø–æ—Å—Ç–∞–≤–∏—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—É—é —Å—É–º–º—É –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –∏ first-write-wins
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: –†–æ–≤–Ω–æ 1 —Å—Ç–∞–≤–∫–∞ —É—Å–ø–µ—à–Ω–∞, 9 –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã —Å 409 Conflict

#### 4. High-Frequency Stress (–í—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–π —Å—Ç—Ä–µ—Å—Å)
- **–ß—Ç–æ**: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω—ã–µ –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–µ —Å—Ç–∞–≤–∫–∏
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**: –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: >200 —Å—Ç–∞–≤–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –Ω–∞ >25 req/s

#### 5. Massive Concurrent Stress (–ú–∞—Å—Å–∏–≤–Ω—ã–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π —Å—Ç—Ä–µ—Å—Å)
- **–ß—Ç–æ**: 300 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**: –ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: >200 —É—Å–ø–µ—à–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫ (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã –∏–∑-–∑–∞ –∫–æ–Ω—Ç–µ–Ω—Ü–∏–∏)

**–ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** (`226/300 @ 17.2 req/s`):
- **226 —É—Å–ø–µ—à–Ω—ã—Ö**: –≠—Ç–∏ —Å—Ç–∞–≤–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **74 –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ**: –û—Ç–∫–ª–æ–Ω–µ–Ω—ã –Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–º–∏ –∑–∞—â–∏—Ç–∞–º–∏ (–Ω–µ –æ—à–∏–±–∫–∏)
- **17.2 req/s**: –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ–¥ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π

**–ü–æ—á–µ–º—É –Ω–µ 300/300?** –°–∏—Å—Ç–µ–º–∞ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö:
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (Redlock)**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç race conditions, –æ—Ç–∫–ª–æ–Ω—è—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö —Å—É–º–º**: –¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ —Å—Ç–∞–≤–∫–∞ –Ω–∞ —Å—É–º–º—É —Ä–∞–∑—Ä–µ—à–µ–Ω–∞
- **Rate limiting**: –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞/DoS –∞—Ç–∞–∫

**–ß—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã:**

| –†–µ–∑—É–ª—å—Ç–∞—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-----------|----------|
| `300/300` —Å –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏ –≤ –ë–î | –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö - –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì |
| –ü–∞–¥–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç | –°–∏—Å—Ç–µ–º–∞ –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è - –Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è |
| `0/300` | –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–∞ - –Ω—É–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `<100/300` —Å –æ—à–∏–±–∫–∞–º–∏ | –ó–∞—â–∏—Ç–∞ —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∏–ª–∏ –±–∞–≥–∏ |

**–ß—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∑–¥–æ—Ä–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É:**

| –†–µ–∑—É–ª—å—Ç–∞—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-----------|----------|
| `>200/300` | –•–æ—Ä–æ—à–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ–¥ —Å—Ç—Ä–µ—Å—Å–æ–º |
| `>15 req/s` | –ü—Ä–∏–µ–º–ª–µ–º–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
| –ù–µ—Ç –¥—É–±–ª–µ–π —Å—Ç–∞–≤–æ–∫ | –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ |
| –ù–µ—Ç –ø–∞–¥–µ–Ω–∏–π | –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π |

#### 6. Insufficient Funds Rejection (–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ —Å—Ä–µ–¥—Å—Ç–≤)
- **–ß—Ç–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—ã—Ç–∞—é—Ç—Å—è –ø–æ—Å—Ç–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Å–≤–æ–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: –í—Å–µ —Å—Ç–∞–≤–∫–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã —Å 402 Payment Required

#### 7. Invalid Bid Rejection (–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫)
- **–ß—Ç–æ**: –†–∞–∑–ª–∏—á–Ω—ã–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ, –Ω—É–ª–µ–≤—ã–µ, –Ω–∏–∂–µ –º–∏–Ω–∏–º—É–º–∞)
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: –í—Å–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã —Å 400 Bad Request

#### 8. Auth Validation (–í–∞–ª–∏–¥–∞—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- **–ß—Ç–æ**: –ó–∞–ø—Ä–æ—Å—ã —Å –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–π/–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**: Middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: –û—Ç–≤–µ—Ç—ã 401 Unauthorized

#### 9. Same-User Race Condition (Race condition –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- **–ß—Ç–æ**: –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 10 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å—Ç–∞–≤–æ–∫
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**: Redlock –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: –ú–∞–∫—Å–∏–º—É–º 1 —É—Å–ø–µ—à–Ω–∞ (–±–ª–∞–≥–æ–¥–∞—Ä—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ)

#### 10. Bid Ordering Verification (–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—è–¥–∫–∞ —Å—Ç–∞–≤–æ–∫)
- **–ß—Ç–æ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤ –ø–æ—Å–ª–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å—Ç–∞–≤–æ–∫
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—É–º–º–µ –∏ –≤—Ä–µ–º–µ–Ω–∏
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–º—É –ø–æ—Ä—è–¥–∫—É

#### 11. Financial Integrity (–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å)
- **–ß—Ç–æ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–ª–∏ –ø–æ—Ç–µ—Ä–∏ –¥–µ–Ω–µ–≥
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**: –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: –î–µ–ø–æ–∑–∏—Ç—ã - –≤—ã–≤–æ–¥—ã = –±–∞–ª–∞–Ω—Å—ã + –∑–∞–º–æ—Ä–æ–∑–∫–∞ + –ø–æ—Ç—Ä–∞—á–µ–Ω–æ

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ (–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º)

```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       AUCTION SYSTEM LOAD TEST SUITE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚úì Concurrent Bid Storm: 100/100 succeeded @ 19.9 req/s
‚úì Rapid Sequential Bids: 20/20 succeeded, avg=15ms
‚úì Tie-Breaking (Same Amount): 1 winner from 10 identical bids
‚úì High-Frequency Stress: 219 bids @ 27.4 req/s
‚úì Massive Concurrent Stress: 226/300 @ 17.2 req/s
‚úì Insufficient Funds Rejection: 5/5 correctly rejected
‚úì Invalid Bid Rejection: 4/4 rejected
‚úì Auth Validation: InvalidToken=401, NoAuth=401
‚úì Same-User Race Condition: 0/10 succeeded (expected ‚â§5)
‚úì Bid Ordering Verification: ordering=correct
‚úì Financial Integrity: VALID (diff=0.00)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  ALL TESTS PASSED
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
```

---

## Artillery –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã (v2.0.27)

–ü—Ä–æ–¥–∞–∫—à–µ–Ω-grade –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Artillery –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π —Å–∏–º—É–ª—è—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞.

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
cd backend

# HTTP —Ç–µ—Å—Ç—ã
pnpm run load-test:smoke     # –ë—ã—Å—Ç—Ä–∞—è 10—Å –ø—Ä–æ–≤–µ—Ä–∫–∞
pnpm run load-test           # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Ç–µ—Å—Ç
pnpm run load-test:stress    # –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç (—á–µ—Ä–µ–∑ -e stress –æ–∫—Ä—É–∂–µ–Ω–∏–µ)
pnpm run load-test:http-max  # –ú–∞–∫—Å–∏–º—É–º (1.6K-2.8K req/s)
pnpm run load-test:edge      # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∞–µ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤

# WebSocket —Ç–µ—Å—Ç—ã
pnpm run load-test:ws        # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π WS (100% success)
pnpm run load-test:ws-max    # –ú–∞–∫—Å–∏–º—É–º (200K emit/s)
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å (1 –≤–æ—Ä–∫–µ—Ä)

| –ü—Ä–æ—Ç–æ–∫–æ–ª | –ü–∏–∫ | –£—Å—Ç–æ–π—á–∏–≤–∞—è | –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å | –û—Ü–µ–Ω–∫–∞ |
|----------|-----|------------|-------------|--------|
| **WebSocket** | **200,018 emit/s** | 175,970/s | 0–º—Å | **A+** |
| **HTTP** | **2,779 req/s** | 1,623/s | 1.3–º—Å mean (–Ω–æ—Ä–º), 693–º—Å (–º–∞–∫—Å) | **A** |

#### –ö–ª–∞—Å—Ç–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º (12 —è–¥–µ—Ä)

| –ü—Ä–æ—Ç–æ–∫–æ–ª | –ü–∏–∫ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|----------|-----|------------|
| **HTTP** | **3,352 req/s** | Rate limiting –∞–∫—Ç–∏–≤–µ–Ω |
| **WebSocket** | ~2.4M emit/s | –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ (—Ç—Ä–µ–±—É–µ—Ç sticky sessions) |

–í–∫–ª—é—á–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä: `CLUSTER_WORKERS=auto` –≤ `.env`

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  WEBSOCKET (–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å)                                    ‚ïë
‚ïë    üöÄ –ü–ò–ö:        200,018 emit/sec                          ‚ïë
‚ïë    ‚ö° –£–°–¢–û–ô–ß–ò–í–ê–Ø: 175,970 emit/sec                           ‚ïë
‚ïë    üìä –í–°–ï–ì–û:      11,305,542 emits –∑–∞ 67 —Å–µ–∫—É–Ω–¥             ‚ïë
‚ïë    ‚è±Ô∏è  –õ–ê–¢–ï–ù–¢–ù–û–°–¢–¨: 0–º—Å (—Å—É–±-–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–Ω–∞—è)                 ‚ïë
‚ïë                                                              ‚ïë
‚ïë  HTTP (–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å)                                         ‚ïë
‚ïë    üöÄ –ü–ò–ö:        2,779 req/sec (nuclear —Ç–µ—Å—Ç)              ‚ïë
‚ïë    ‚ö° –£–°–¢–û–ô–ß–ò–í–ê–Ø: 1,623 req/sec (max-throughput —Ç–µ—Å—Ç)        ‚ïë
‚ïë    üìä –í–°–ï–ì–û:      282,599 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ ~167 —Å–µ–∫—É–Ω–¥           ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

### –§–∞–π–ª—ã —Ç–µ—Å—Ç–æ–≤ (5 —Ç–µ—Å—Ç–æ–≤)

```
test/artillery/
‚îú‚îÄ‚îÄ load-test.yml                # HTTP —Ç–µ—Å—Ç (smoke/load/stress/soak –æ–∫—Ä—É–∂–µ–Ω–∏—è)
‚îú‚îÄ‚îÄ http-max-throughput.yml      # HTTP –º–∞–∫—Å–∏–º—É–º (1.6K-2.8K req/s)
‚îú‚îÄ‚îÄ edge-cases.yml               # –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ websocket-test.yml           # WebSocket —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π (100% success)
‚îú‚îÄ‚îÄ websocket-max-throughput.yml # WebSocket –º–∞–∫—Å–∏–º—É–º (200K emit/s)
‚îú‚îÄ‚îÄ functions.js                 # HTTP —Ö–µ–ª–ø–µ—Ä—ã
‚îú‚îÄ‚îÄ edge-case-functions.js       # Edge case —Ö–µ–ª–ø–µ—Ä—ã
‚îú‚îÄ‚îÄ websocket-functions.js       # WS —Ö–µ–ª–ø–µ—Ä—ã
‚îú‚îÄ‚îÄ reports/                     # JSON + HTML –æ—Ç—á—ë—Ç—ã
‚îî‚îÄ‚îÄ BENCHMARK_REPORT.md          # –ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç
```

–ü–æ–ª–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤: [`backend/test/artillery/BENCHMARK_REPORT.md`](../../backend/test/artillery/BENCHMARK_REPORT.md)

---

## –Æ–Ω–∏—Ç –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (Vitest)

Backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Vitest** –∫–∞–∫ —Ç–µ—Å—Ç-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

```
backend/src/
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îî‚îÄ‚îÄ **/*.spec.ts          # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (—Ä—è–¥–æ–º —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏)
‚îî‚îÄ‚îÄ tests/
    ‚îú‚îÄ‚îÄ unit/                  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
    ‚îÇ   ‚îî‚îÄ‚îÄ *.spec.ts
    ‚îî‚îÄ‚îÄ integration/           # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (MongoDB Memory Server)
        ‚îî‚îÄ‚îÄ *.spec.ts
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
cd backend

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã (857 —Ç–µ—Å—Ç–æ–≤)
pnpm test

# –¢–æ–ª—å–∫–æ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (680 —Ç–µ—Å—Ç–æ–≤, –±—ã—Å—Ç—Ä–µ–µ)
pnpm test:unit

# –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (177 —Ç–µ—Å—Ç–æ–≤)
pnpm test:integration

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pnpm test:cov

# –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pnpm test:cov:unit

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
pnpm test -- auctions.service.spec.ts

# –†–µ–∂–∏–º watch (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö)
pnpm test:watch

# –í–∏–∑—É–∞–ª—å–Ω—ã–π UI —Ä–µ–∂–∏–º
pnpm test:ui

# –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤ (—Å –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–æ–º)
pnpm test:debug
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

| –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------------------|------------|
| `vitest.config.ts` | –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–≤—Å–µ —Ç–µ—Å—Ç—ã) |
| `vitest.config.unit.ts` | –¢–æ–ª—å–∫–æ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (–∏—Å–∫–ª—é—á–∞–µ—Ç integration/) |
| `vitest.config.integration.ts` | –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã |

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –§–∞–π–ª–æ–≤ | –¢–µ—Å—Ç–æ–≤ | –í—Ä–µ–º—è |
|-----------|--------|--------|-------|
| **–Æ–Ω–∏—Ç** | 15 | 680 | ~3—Å |
| **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ** | 5 | 177 | ~50—Å |
| **–í—Å–µ–≥–æ** | 20 | 857 | ~12—Å (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ) |

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**: –¢–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **MongoDB Memory Server**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç in-memory MongoDB —Å replica set
- **Redis Mock**: `ioredis-mock` –¥–ª—è Redis –æ–ø–µ—Ä–∞—Ü–∏–π
- **SWC Transform**: –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript
- **Typia Integration**: Runtime –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ `@ryoppippi/unplugin-typia`

---

## Nestia E2E-—Ç–µ—Å—Ç—ã

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ E2E-—Ç–µ—Å—Ç—ã, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–µ –≤—Å—é –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

### –ó–∞–ø—É—Å–∫ E2E-—Ç–µ—Å—Ç–æ–≤

```bash
cd backend

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ E2E-—Ç–µ—Å—Ç—ã
for test in test/*.e2e.ts; do npx ts-node "$test"; done

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤
npx ts-node test/concurrency.e2e.ts
npx ts-node test/financial-integrity.e2e.ts
npx ts-node test/websocket-events.e2e.ts
```

### –ù–∞–±–æ—Ä—ã —Ç–µ—Å—Ç–æ–≤

#### 1. –¢–µ—Å—Ç—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç–∏ (`concurrency.e2e.ts`)

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| Concurrent Bids Different Users | 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å—Ç–∞–≤—è—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏ |
| Duplicate Bid Amount Rejection | –í—Ç–æ—Ä–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–ª–æ–Ω—ë–Ω –ø—Ä–∏ —Å—Ç–∞–≤–∫–µ —Ç–∞–∫–æ–π –∂–µ —Å—É–º–º—ã |
| Rapid Bid Increases | –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—Ç–∞–≤–∫—É 10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–æ |
| Concurrent Same-Amount Race | 5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å—Ç–∞–≤—è—Ç –æ–¥–Ω—É —Å—É–º–º—É - —Ä–æ–≤–Ω–æ 1 –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç |
| Bidding on Inactive Auction | –°—Ç–∞–≤–∫–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã –Ω–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–º –∞—É–∫—Ü–∏–æ–Ω–µ |
| Leaderboard Consistency | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—è–¥–∫–∞ –ø—Ä–∏ 20 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å—Ç–∞–≤–∫–∞—Ö |

#### 2. –¢–µ—Å—Ç—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ (`financial-integrity.e2e.ts`)

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| Balance Freezing | –°—Ç–∞–≤–∫–∞ 300 –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞–µ—Ç 300, –¥–æ—Å—Ç—É–ø–Ω—ã–π –±–∞–ª–∞–Ω—Å —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è |
| Incremental Freeze | –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–∞–∑–Ω–∏—Ü—É |
| Outbid Refund | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—É–º–º –ø—Ä–∏ –ø–µ—Ä–µ–±–∏—Ç–∏–∏ |
| Insufficient Funds Rejection | –ù–µ–ª—å–∑—è —Å—Ç–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ |
| Multi-User Financial Integrity | –°—É–º–º–∞ –¥–µ–Ω–µ–≥ –≤ —Å–∏—Å—Ç–µ–º–µ = —Å—É–º–º–µ –¥–µ–ø–æ–∑–∏—Ç–æ–≤ |
| Bid Amount Validation | –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—Ç–∞–≤–æ–∫ –Ω–∏–∂–µ –º–∏–Ω–∏–º—É–º–∞ –∏ —Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º —à–∞–≥–æ–º |

#### 3. –¢–µ—Å—Ç—ã WebSocket —Å–æ–±—ã—Ç–∏–π (`websocket-events.e2e.ts`)

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| New Bid Event | –ö–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç `new-bid` –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ —Å—Ç–∞–≤–∫–∏ |
| Auction Update Event | –ö–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç `auction-update` –ø—Ä–∏ —Å–º–µ–Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è |
| Room Isolation | –ö–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —Å–æ–±—ã—Ç–∏—è —Ç–æ–ª—å–∫–æ –æ—Ç —Å–≤–æ–µ–≥–æ –∞—É–∫—Ü–∏–æ–Ω–∞ |
| Multiple Connections Same User | –í—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–ª—É—á–∞—é—Ç —Å–æ–±—ã—Ç–∏—è |
| Leave Auction Room | –ù–µ—Ç —Å–æ–±—ã—Ç–∏–π –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã |

#### 4. –¢–µ—Å—Ç—ã —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ (`server-timer.e2e.ts`)

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| Countdown Broadcast | –°–µ—Ä–≤–µ—Ä —Ä–∞—Å—Å—ã–ª–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á—ë—Ç –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É |
| Anti-Sniping Extension | –¢–∞–π–º–µ—Ä –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–∑–¥–Ω–∏—Ö —Å—Ç–∞–≤–∫–∞—Ö |
| Multiple Clients Sync | –í—Å–µ –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—Å—á—ë—Ç |

#### 5. –¢–µ—Å—Ç—ã Redis-–ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ (`redis-leaderboard.e2e.ts`)

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| Leaderboard Ordering | –°—Ç–∞–≤–∫–∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Å—É–º–º–µ –ø–æ —É–±—ã–≤–∞–Ω–∏—é |
| Leaderboard Pagination | Offset/limit —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ |
| Bid Update | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ª–∏–¥–µ—Ä–±–æ—Ä–¥ (–±–µ–∑ –¥—É–±–ª–µ–π) |
| Tie Breaking | –ë–æ–ª–µ–µ —Ä–∞–Ω–Ω—è—è —Å—Ç–∞–≤–∫–∞ –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Å—É–º–º–µ |

#### 6. –¢–µ—Å—Ç—ã –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç–∞–≤–æ–∫ (`bid-carryover.e2e.ts`)

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| Multi-Round Auction Setup | 3-—Ä–∞—É–Ω–¥–æ–≤—ã–π –∞—É–∫—Ü–∏–æ–Ω —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ |
| Bids in Multi-Round | –¢–æ–ø-N —Å—Ç–∞–≤–æ–∫ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ –≤—ã–∏–≥—Ä—ã—à–Ω—ã–µ |
| Min Winning Bid Calculation | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—É–º–º—É –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –≤—ã–∏–≥—Ä—ã—à–Ω—ã–µ |
| Carryover Schema | –°—Ö–µ–º–∞ —Å—Ç–∞–≤–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ |

#### 7. –¢–µ—Å—Ç—ã –ø–æ—Ç–æ–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–∞ (`auction-flow.e2e.ts`)

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| Full Auction Flow | –¶–∏–∫–ª: –°–æ–∑–¥–∞–Ω–∏–µ ‚Üí –°—Ç–∞—Ä—Ç ‚Üí –°—Ç–∞–≤–∫–∞ ‚Üí –õ–∏–¥–µ—Ä–±–æ—Ä–¥ |

### –¢–µ—Å—Ç–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã

–í—Å–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—â–∏–µ —Ö–µ–ª–ø–µ—Ä—ã –∏–∑ `test/utils/test-helpers.ts`:

```typescript
// –û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π (–±–µ–∑ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö sleep)
await waitFor(() => bids.length === 5, { timeout: 5000 });

// –û–∂–∏–¥–∞–Ω–∏–µ WebSocket —Å–æ–±—ã—Ç–∏–π
const events = await collectEvents(socket, 'new-bid', 3);

// –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ Redlock
await waitForLockRelease(); // 100ms

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –≤—Ö–æ–¥ –≤ –∫–æ–º–Ω–∞—Ç—É –∞—É–∫—Ü–∏–æ–Ω–∞
const socket = await connectAndJoin(WS_URL, token, auctionId);
```

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë   CONCURRENCY E2E TESTS                ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

--- Test: Concurrent Bids from Different Users ---

‚úì Created 10 users
‚úì Created auction: 696ca0f8dbc93b6282beb123
‚úì 10 bids succeeded
  0 bids failed (expected due to rate limiting)
‚úì Leaderboard has 10 entries
‚úì All bid amounts are unique (no duplicates)

‚úì Concurrent Bids Different Users test PASSED

...

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë   ALL CONCURRENCY TESTS PASSED!        ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

---

## –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

### –¢–µ–∫—É—â–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ —Ç–µ—Å—Ç–∞–º

| –¢–∏–ø —Ç–µ—Å—Ç–æ–≤ | –§—Ä–µ–π–º–≤–æ—Ä–∫ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –°—Ç–∞—Ç—É—Å |
|------------|-----------|------------|--------|
| –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã | Vitest | 680 | ‚úÖ |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ | Vitest + MongoDB Memory Server | 177 | ‚úÖ |
| E2E-—Ç–µ—Å—Ç—ã | Nestia | 7 –Ω–∞–±–æ—Ä–æ–≤ | ‚úÖ |
| –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ | Artillery | 5 –∫–æ–Ω—Ñ–∏–≥–æ–≤ | ‚úÖ |

### –¶–µ–ª–∏ –ø–æ–∫—Ä—ã—Ç–∏—è

| –û–±–ª–∞—Å—Ç—å | –¶–µ–ª—å |
|---------|------|
| –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π | >80% |
| –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã | >70% |
| Guards/Middleware | >90% |
| –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏ (—Å—Ç–∞–≤–∫–∏) | >95% |

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏

```bash
cd backend

# –ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ–∫—Ä—ã—Ç–∏—è
pnpm test:cov

# –¢–æ–ª—å–∫–æ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (–±—ã—Å—Ç—Ä–µ–µ)
pnpm test:cov:unit

# –û—Ç–∫—Ä—ã—Ç—å HTML –æ—Ç—á—ë—Ç
open coverage/index.html
```

---

## –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ —Å—Ç–∞–≤–æ–∫

1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –±–∞–ª–∞–Ω—Å–æ–º:
```bash
curl -X POST http://localhost:4000/api/users/deposit \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"amount": 1000}'
```

2. –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É:
```bash
curl -X POST http://localhost:4000/api/auctions/$AUCTION_ID/bid \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"amount": 100}'
```

3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤:
```bash
curl http://localhost:4000/api/auctions/$AUCTION_ID/leaderboard \
  -H "Authorization: Bearer $TOKEN"
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ WebSocket

```javascript
// –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ Node.js
const io = require('socket.io-client');

const socket = io('http://localhost:4000', {
  auth: { token: 'your-jwt-token' }
});

socket.on('connect', () => {
  console.log('–ü–æ–¥–∫–ª—é—á–µ–Ω–æ');
  socket.emit('join-auction', { auctionId: '...' });
});

socket.on('new-bid', (data) => {
  console.log('–ù–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞:', data);
});

socket.on('anti-sniping', (data) => {
  console.log('–†–∞—É–Ω–¥ –ø—Ä–æ–¥–ª—ë–Ω:', data);
});
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω—Ç–∏-—Å–Ω–∞–π–ø–∏–Ω–≥–∞

1. –°–æ–∑–¥–∞—Ç—å –∞—É–∫—Ü–∏–æ–Ω —Å –∫–æ—Ä–æ—Ç–∫–∏–º —Ä–∞—É–Ω–¥–æ–º (5 –º–∏–Ω—É—Ç)
2. –î–æ–∂–¥–∞—Ç—å—Å—è –æ–∫–Ω–∞ –∞–Ω—Ç–∏-—Å–Ω–∞–π–ø–∏–Ω–≥–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç)
3. –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Ä–µ–º—è –∫–æ–Ω—Ü–∞ —Ä–∞—É–Ω–¥–∞ –ø—Ä–æ–¥–ª–µ–Ω–æ
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ WebSocket —Å–æ–±—ã—Ç–∏—è `anti-sniping`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫

```bash
# –ò—Å–ø–æ–ª—å–∑—É—è GNU parallel
seq 1 100 | parallel -j100 'curl -s -X POST \
  http://localhost:4000/api/auctions/$AUCTION_ID/bid \
  -H "Authorization: Bearer $TOKEN_{}" \
  -H "Content-Type: application/json" \
  -d "{\"amount\": {}00}"'
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏

–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —É—Ç–µ—á–∫–∏ –¥–µ–Ω–µ–≥:

```bash
curl http://localhost:4000/api/transactions/verify-integrity \
  -H "Authorization: Bearer $ADMIN_TOKEN"
```

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
```json
{
  "valid": true,
  "totalDeposits": 50000,
  "totalWithdrawals": 10000,
  "totalUserBalances": 35000,
  "totalFrozenBalances": 5000,
  "totalSpentOnWins": 0,
  "difference": 0
}
```

–ï—Å–ª–∏ `difference` –Ω–µ —Ä–∞–≤–µ–Ω 0, –∏—Å—Å–ª–µ–¥—É–π—Ç–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å—Ç–∞–≤–æ–∫ –∑–∞–ø–∏—Å–∞–Ω—ã
3. –ü–æ–∏—â–∏—Ç–µ –ø—Ä–µ—Ä–≤–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ oplog MongoDB

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è CI/CD

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è GitHub Actions

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π CI workflow (`.github/workflows/ci.yml`):

```yaml
name: CI

on:
  push:
    branches: [master]
  pull_request:
    branches: [master]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup pnpm
        uses: pnpm/action-setup@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 22
          cache: pnpm

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (–±—ã—Å—Ç—Ä—ã–µ, –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
      - name: Run unit tests
        run: pnpm --filter backend test:unit
        env:
          CI: true
          NODE_OPTIONS: --max-old-space-size=4096

      # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (MongoDB Memory Server)
      - name: Run integration tests
        run: pnpm --filter backend test:integration
        env:
          CI: true
          NODE_OPTIONS: --max-old-space-size=4096
          MONGOMS_REPLSET: rs0

      # –û—Ç—á—ë—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
      - name: Generate coverage report
        run: pnpm --filter backend test:cov
        env:
          CI: true
```

### –û–±–∑–æ—Ä CI –ø–∞–π–ø–ª–∞–π–Ω–∞

| Job | –û–ø–∏—Å–∞–Ω–∏–µ | –í—Ä–µ–º—è |
|-----|----------|-------|
| **CodeQL** | –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ | ~3–º–∏–Ω |
| **Trivy** | –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π | ~1–º–∏–Ω |
| **Lint** | ESLint –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ | ~30—Å |
| **Test (Unit)** | Vitest —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (680 —Ç–µ—Å—Ç–æ–≤) | ~1–º–∏–Ω |
| **Test (Integration)** | Vitest –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (177 —Ç–µ—Å—Ç–æ–≤) | ~2–º–∏–Ω |
| **Build** | NestJS –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å–±–æ—Ä–∫–∞ | ~1–º–∏–Ω |

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (–∫–∞–∫ –≤ CI)

```bash
cd backend

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–∫ –≤ CI
pnpm test:unit && pnpm test:integration

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º (–∫–∞–∫ –≤ CI)
CI=true pnpm test:cov
```
